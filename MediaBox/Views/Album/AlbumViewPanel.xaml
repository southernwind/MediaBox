<UserControl
	x:Class="SandBeige.MediaBox.Views.Album.AlbumViewPanel"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:componentModel="clr-namespace:System.ComponentModel;assembly=System"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:enum="clr-namespace:SandBeige.MediaBox.Composition.Enum;assembly=MediaBox.Composition"
	xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
	xmlns:local="clr-namespace:SandBeige.MediaBox.Views.Album"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:mediaInfoV="clr-namespace:SandBeige.MediaBox.Views.Media.InformationPanel"
	xmlns:sort="clr-namespace:SandBeige.MediaBox.Models.Album.Sort"
	xmlns:viewer="clr-namespace:SandBeige.MediaBox.Views.Album.Viewer"
	xmlns:vm="clr-namespace:SandBeige.MediaBox.ViewModels.Album"
	d:DataContext="{d:DesignInstance vm:AlbumViewModel}"
	d:DesignHeight="450"
	d:DesignWidth="800"
	mc:Ignorable="d">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<DockPanel Grid.Row="0">
			<TextBlock DockPanel.Dock="Top" Text="{Binding Title.Value}" />
			<TextBlock DockPanel.Dock="Top">
				<Run Text="{Binding CurrentIndex.Value, Mode=OneWay, Converter={StaticResource IndexToPositionConverter}}" />
				<Run Text=" / " />
				<Run Text="{Binding Count.Value, Mode=OneWay}" />
				<Run Text=" / " />
				<Run Text="{Binding BeforeFilteringCount.Value, Mode=OneWay}" />
			</TextBlock>
			<Menu DockPanel.Dock="Left">
				<MenuItem
					HorizontalContentAlignment="Stretch"
					Header="並び替え"
					ItemsSource="{Binding SortDescriptionManager.SortItems}">
					<MenuItem.Resources>
						<iconPacks:PackIconEntypo
							x:Key="CheckIcon"
							Padding="4"
							x:Shared="False"
							Background="{StaticResource BackgroundNormal}"
							Foreground="White"
							Kind="Check" />
					</MenuItem.Resources>
					<ItemsControl.ItemContainerStyle>
						<Style
							d:DataContext="{d:DesignInstance sort:SortItem}"
							BasedOn="{StaticResource {x:Type MenuItem}}"
							TargetType="MenuItem">
							<Setter Property="IsCheckable" Value="True" />
							<Setter Property="StaysOpenOnClick" Value="True" />
							<Setter Property="IsChecked" Value="{Binding Enabled}" />
							<Setter Property="Icon" Value="{StaticResource CheckIcon}" />
						</Style>
					</ItemsControl.ItemContainerStyle>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<DockPanel>
								<TextBlock
									VerticalAlignment="Center"
									DockPanel.Dock="Left"
									Text="{Binding DisplayName}" />
								<!--  TODO : 昇順降順表示が切り替わるようにする  -->
								<CheckBox DockPanel.Dock="Right" IsChecked="{Binding Direction, Converter={StaticResource ListSortDirectionToBooleanConverter}}">
									<CheckBox.Resources>
										<Style BasedOn="{StaticResource {x:Type CheckBox}}" TargetType="CheckBox">
											<Style.Triggers>
												<DataTrigger Binding="{Binding Direction}" Value="{x:Static componentModel:ListSortDirection.Ascending}">
													<Setter Property="Template">
														<Setter.Value>
															<ControlTemplate TargetType="CheckBox">
																<iconPacks:PackIconMaterial Kind="SortAscending" />
															</ControlTemplate>
														</Setter.Value>
													</Setter>
												</DataTrigger>
												<DataTrigger Binding="{Binding Direction}" Value="{x:Static componentModel:ListSortDirection.Descending}">
													<Setter Property="Template">
														<Setter.Value>
															<ControlTemplate TargetType="CheckBox">
																<iconPacks:PackIconMaterial Kind="SortDescending" />
															</ControlTemplate>
														</Setter.Value>
													</Setter>
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</CheckBox.Resources>
								</CheckBox>
								<Grid Width="10" />
							</DockPanel>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</MenuItem>
			</Menu>
			<ListBox
				ItemsSource="{Binding Source={StaticResource DisplayMode}}"
				SelectedItem="{Binding DisplayMode.Value}"
				Style="{StaticResource TileListBox}">
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<TextBlock Text="{Binding Converter={StaticResource DisplayModeToStringConverter}}" />
					</DataTemplate>
				</ItemsControl.ItemTemplate>
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<StackPanel Orientation="Horizontal" />
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>
			</ListBox>
		</DockPanel>
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="1500*" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="300*" MinWidth="200" />
			</Grid.ColumnDefinitions>

			<Grid DataContext="{Binding DisplayViewModel.Value.AlbumViewModel}">
				<DockPanel>
					<DockPanel.Resources>
						<Style TargetType="local:MediaList">
							<Style.Triggers>
								<DataTrigger Binding="{Binding DisplayMode.Value}" Value="{x:Static enum:DisplayMode.Detail}">
									<Setter Property="DockPanel.Dock" Value="Bottom" />
								</DataTrigger>
							</Style.Triggers>
						</Style>
					</DockPanel.Resources>
					<local:MediaList />
					<viewer:Detail />
				</DockPanel>
				<viewer:Map />
			</Grid>
			<GridSplitter Grid.Column="1" />
			<mediaInfoV:InformationPanel Grid.Column="2" DataContext="{Binding MediaFileInformations.Value}" />
		</Grid>
	</Grid>
</UserControl>
